# 极客时间 数据结构与算法

## 复杂度分析（上）：如何分析、统计算法的执行效率和资源消耗？

### 1.为什么需要复杂度分析？

* 测试结果非常依赖测试环境
* 测试结果受数据规模的影响很大

### 2.大 O 时间复杂度表示法

> 也称渐进时间复杂度(asymptotic time complexity)，简称时间复杂度。大 O 时间复杂度实际上并不具体表示代码真正的执行时间，表示代码执行时间随数据规模增长的变化趋势。

所有代码的执行时间 T(n) 与每行代码的执行次数 n 成正比。将该规律总结为一条公式：**T(n)=O(f(n))**。

* T(n)：表示代码执行的时间
* n：表示数据规模的大小
* f(n)：表示代码的执行的次数总和
* O：表示代码执行时间T(n)与f(n)表达式成正比

### 3.时间复杂度分析

*  只关注循环执行次数最多的一段代码
* 加法法则：总复杂度等于量级最大的那段代码的复杂度

* 乘法法则（嵌套循环）：嵌套代码的复杂度等于嵌套内外代码复杂度的乘积

### 4.几种常见时间复杂度实例分析

![10-1](E:\markdown笔记\笔记图片\10\10-1.jpg)

对于刚罗列的复杂度量级，我们可以粗略地分为两类，多项式量级和非多项式量级。其中非多项式量级只有两个：O(2n) 和 O(n!)。

**P类问题**的概念：如果一个问题可以找到一个能在多项式的时间里解决它的算法，那么这个问题就属于P问题。P是英文单词多项式Polynomial的第一个字母。

**NP问题**是指可以在多项式的时间里验证一个解的问题。NP问题的另一个定义是，可以在多项式的时间里猜出一个解的问题。

* O(1)

  一般情况下，只要算法中不存在循环语句、递归语句，即使有成千上万行的代码，其时间复杂度也是O(1)。

* O(logn)、O(nlogn)

  ```c
   i=1;
   while (i <= n)  {
     i = i * 2;
   }
  ```

  ```c
   i=1;
   while (i <= n)  {
     i = i * 3;
   }
  ```

  上面两段代码都是对数阶时间复杂度。第一段代码的时间复杂度是O(log2 n)，第二段代码的时间复杂度为O(log3 n)。

  对数之间是可以转换的，log3 n就等于log3 2 log2 n，所以 O(log3 n) = O(C * log2 n)，其中C=log3 2 是一个常。在采用大O标记复杂度的时候，可以忽略系数，即O(Cf(n)) = O(f(n))。因此，在对数阶时间复杂度的表示方法里，我们忽略对数的“底”，统一表示为 O(logn)。

  O(nlogn)就是将O(logn)时间复杂度的代码循环执行了n遍，所以运用乘法原理他的时间复杂度就是O(nlogn)了。

* O(m+n)、O(m*n)

  ```c
  int cal(int m, int n) {
    int sum_1 = 0;
    int i = 1;
    for (; i < m; ++i) {
      sum_1 = sum_1 + i;
    }
  
    int sum_2 = 0;
    int j = 1;
    for (; j < n; ++j) {
      sum_2 = sum_2 + j;
    }
  
    return sum_1 + sum_2;
  }
  ```

  m 和 n 是表示两个数据规模。我们无法事先评估 m 和 n谁的量级大，所以我们在表示复杂度的时候，就不能简单的利用加法法则，省略调其中一个，所以上面的时间复杂度就是O(m+n)。

  而对于O(m*n)来讲的话，就是如下面代码所示的时间复杂度：

  ```c
  for(int i = 0; i < n; i++){
      for(int j = 0; j < m; j++){
          // xxxx
      }
  }
  ```
### 5.空间复杂度分析

> 时间复杂度的全称是渐进时间复杂度，表示算法的执行时间与数据规模之间的增长关系。类比一下，空间复杂度全称就是渐进空间复杂度（asymptotic space complexity），表示算法的存储空间与数据规模之间的增长关系。

```c
void print(int n) {
    int i = 0;
    int[] a = new int[n];
}
```

  在上面这段代码中，我们可以看到在方法print中声明的第一个存储空间i，但他是常量阶的，他跟数据规模n没有关系，我们可以忽略。

  第三行代码申请了一个大小为n的int数组，所以这段代码的空间复杂度就是 O(n)。

### 6.课后思考

问：有人说，我们项目之前都会进行性能测试，再做代码的时间复杂度、空间复杂度分析，是不是对此一举呢？而且，每段代码都分析一下时间复杂度、空间复杂度，是不是很浪费时间呢？你怎么看？

自己看法：我认为不是多此一举，是十分必要。性能测试有两个缺陷：1、测试结果非常依赖测试环境测试，2、结果受数据规模的影响很大，所以性能的测试不一定准确。其次每个项目中并不是每段代码都需要进行性能测试，我们只需对关键的代码段进行时间和空间复杂度的分析。

别人的看法1：

![2](E:\markdown笔记\笔记图片\10\2.png)

别人的看法2：

![3](E:\markdown笔记\笔记图片\10\3.png)

