## 第12章 享元模式讲解

### 1. 享元模式讲解

* 定义：提供了减少对象数量从而改善应用所需的对象结构的方法（减少创建对象的数量，从而减少内存的占用，提高性能）

* 特点：运用共享技术有效支持大量细粒度的对象

* 类型：结构型

* 适用场景

  * 常常应用于系统底层的开发，以便解决系统的性能问题
  * 系统有大量相似对象、需要缓冲池的场景

* 优点

  * 减少对象的创建，降低内存总对象的数量，降低系统的内存，提高效率
  * 减少内存之外的其他资源占用（其他资源比如操作系统中的文件句柄，窗口句柄；new关键字所需的时间）

* 缺点

  * 关注内/外部状态、关注线程安全问题
  * 使系统、程序的逻辑复杂化

* 扩展

  * 内部状态

    在享元对象内部并且不用随环境改变而改变的共享部分，称为享元对象的内部状态。

  * 外部状态

    环境改变而改变的、不可以共享的状态就是外部状态。

* 相关设计模式

  * 享元模式和代理模式

    代理模式需要代理一个类，如果生成代理类所需的时间和资源比较多，那么就可以使用享元模式来提高程序的处理速度。

  * 享元模式和单例模式

    容器单例就是享元模式和单例模式的结合， 享元模式就是一种复用对象的思想，至于何时使用，如何使用就要视业务逻辑而定。